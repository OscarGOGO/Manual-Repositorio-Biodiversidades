[{"path":"index.html","id":"biodiversidades","chapter":"Biodiversidades","heading":"Biodiversidades","text":"En este manual de prueba se documenta parte del backend de Biodiversidades","code":""},{"path":"git.html","id":"git","chapter":"1 Git","heading":"1 Git","text":"","code":""},{"path":"git.html","id":"instalar-git-y-configurar","chapter":"1 Git","heading":"1.1 Instalar git y configurar","text":"1. Crear cuenta en GitLab o GitHub2. Instalar Git: https://git-scm.com/3. Abrir Git bash4. Configurar Usename escribiendo:git config –-global user.name \"tu user name\"5. Configurar correo escribiendo:git config –-global user.email \"tu user email\"6. Corroborar que se grabó el user name y correo con (Si se necesita puedes salir escribiendo laletra q y enter):git config –-list","code":""},{"path":"git.html","id":"git-gitlab-y-rstudio","chapter":"1 Git","heading":"1.2 Git, GitLab y RStudio","text":"1. Abrimos RStudio2. Nos dirigimos la pestaña de Tools -> Global options -> Git/SVN 3. Generamos una llave SSH (Solo se necesita hacer una ocasión) y la copiamos4. Abrimos GitLab y nos dirigimos Preferences o User settings -> SSH Keys 5. Pegamos el código anterior en la opción key6. Le damos un título y retiramos la fecha de expiración. /7. Finalmente, damos click en Add Key","code":""},{"path":"gitlab-github.html","id":"gitlab-github","chapter":"2 GitLab GitHub","heading":"2 GitLab GitHub","text":"","code":""},{"path":"gitlab-github.html","id":"generar-nuevo-proyecto-gitlab-o-repositorio-github","chapter":"2 GitLab GitHub","heading":"2.1 Generar nuevo proyecto (GitLab) o repositorio (GitHub)","text":"1. GitLab, crear nuevo repositorio.\nPaso 1. Crear nuevo repositorio en GitLab2. Configurar proyecto o repositorioSe deben considerar al menos 4 cosas:Nombre (obligatorio)Nombre (obligatorio)Privacidad (obligatorio)Privacidad (obligatorio)Readme (opcional)Readme (opcional)Click crear :PClick crear :PPaso 2. GitLab","code":""},{"path":"gitlab-github.html","id":"crear-proyecto-en-rstudio","chapter":"2 GitLab GitHub","heading":"2.2 Crear proyecto en RStudio","text":"1. En GitLab o GitHub debes clonar el repositorio en tu maquina haciendo Click en clone2. Copiar el código de SSH o HTTPS.3. Abrir RStudio4. Crear nuevo proyecto 5. Seleccionar Version control6. Seleccionar Git 7. Pegar en Repository URL el código SSH o HTTPS de GitLab, dar un nombre y seleccionar subdirectorio Ver pestaña de Git","code":""},{"path":"gitlab-github.html","id":"push","chapter":"2 GitLab GitHub","heading":"2.3 PUSH","text":"1. Crear un nuevo archivo de R y colocar cualquier cosa, por ejemplo, crear el script de R test.RVer pestaña de GitEl archivo test.R aparece en la pestaña Git. Ahora daremos click en CommitSe despliega una nueva ventana. Seleccionar los archivos que se buscan subir o actualizar en el repositorio de GitLab y marcar (Stage). Escribir un mensaje (Commit message) y hacer click en PushVer pestaña de GitVer pestaña de GitVer pestaña de GitVer pestaña de Git","code":""},{"path":"gitlab-github.html","id":"pull","chapter":"2 GitLab GitHub","heading":"2.4 PULL","text":"1. Abrimos el repositorio de GitLab 2. Editamos el archivo test.RSeleccionar editor y dar clickAgregamos algún comando o texto3. Hacemos un comentario en Commit messages y damos click en Commit changes4. Regresamos nuestro proyecto en RStudio y buscamos nuestra ventana con la pestaña Git que por lo general es la superior derecha.5. Damos click en Pull6. Podemos ver los cambios haciendo click en Diff o en Commit seguido de Changes:\n","code":""},{"path":"organización-de-documentos-y-carpetas-en-el-repositorio.html","id":"organización-de-documentos-y-carpetas-en-el-repositorio","chapter":"3 Organización de documentos y carpetas en el repositorio","heading":"3 Organización de documentos y carpetas en el repositorio","text":"Este repositorio se puede usar para la generación de tablas, vectores, raster, etc. que sirven principalmente de entrada para las gráficas en la plataforma Biodiversidades.En el repositorio se incluyen entradas, scripts y salidas para el tablero de datos y el tablero geoespacial.Probablemente los usuarios más frecuentes del repositorio sean las personas que programen en la SEE, es por eso que sería de gran valía sugerir un arreglo de archivos y carpetas del repositorio. Si el repositorio y su arreglo se realiza por parte de un externo sería bueno considerar las sugerencias aquí propuestas.Se sugiere que las carpetas y archivos tengan un órden jerárquico y que los nombres de las carpetas inicien con una numeración dos dígitos y guión bajo (p. ej., 00_, 01_, 02_) seguido de nombres cortos, sin espacios y sin acentos.continuación, se enumeran algunas de las sugerencias de arreglo en repositorio:Cuatro carpetas principales, 00_Admin, 01_Entradas, 02_Scripts, 03_Salidas.La carpeta 00_Admin contiene información general que puede ser relevante para entender los archivos de entrada. Los archivos pueden ser, por ejemplo, presentaciones, metadatos de insumos, metadatos de scripts, pruebas, documentos, archivos README, etc. Debido las limitaciones de almacenamiento en los administradores de repositorios se sugiere incorporar archivos de gran tamaño; los archivos de gran tamaño pueden destinarse la carpeta de trabajo en el disco e$(\\gap) (Ver siguiente sección).La carpeta 01_Entradas contiene las subcarpetas 01_Funciones y 02_Temporales.La subcarpeta 01_Funciones contiene funciones de R (formatos: .R, .RData o .rds que se ejecutan con source()) que son usados comúnmente en los scripts de diversas secciones de la plataforma (p.ej., archivo de R que contiene las funciones de consulta al SNIB que se usan en varios indicadores). Mientras que en la subcarpeta 02_temporales se encuentran archivos temporales (archivos vectoriales, raster, tablas o funciones) que son de gran tamaño y que son de utilidad para correr de forma fluida los scripts de R. Los archivos de gran tamaño se recomienda alojarlos en la carpeta de trabajo en el disco e$(\\gap) (Ver sección 4).La carpeta 02_Scripts tiene dos subcarpetas que corresponden al Tablero de datos (01_Tablero_datos) y al Tablero geoespacial (02_Tablero_geoespacial). Dentro de cada carpeta existe un archivo .R o script (“Leader”) con las líneas de código necesarias para el procesamiento de todos los elementos/indicadores que permiten obtener las salidas para implementar los gráficos o mapas de los tableros. Para correr los scripts de los temas basta con usar la función source() (para obtener más información consultar la presentación Arreglo jerárquico).En las subcarpetas 01_Tablero_datos y 02_Tablero_geoespacial, se integran otras cuatro carpetas que corresponden los cuatro grandes temas de la plataforma BiodiversidadES (01_Conocimiento, 02_Cambio_global, 03_Avances_hacia_sustentabilidad, 04_Escenarios).La carpeta 03_Salidas contiene las salidas de los scripts de R contenidos en la carpeta 02_Scripts. Los formatos de salida serán acordados con el programador de la plataforma BriodiversidadES, sin embargo, los formatos más usuales son vectoriales, tablas e imágenes. La carpeta 03_Salidas contiene dos subcarpetas que corresponden al Tablero de datos (01_Tablero_datos) y al Tablero geoespacial (02_Tablero_geoespacial). Cada carpeta contiene cuatro carpetas que corresponden los cuatro grandes temas de la plataforma BiodiversidadES y su vez estas cuatro carpetas contienen carpetas con el nombre de las secciones.","code":""},{"path":"organización-de-documentos-y-carpetas-en-el-repositorio.html","id":"ventajas","chapter":"3 Organización de documentos y carpetas en el repositorio","heading":"3.0.1 Ventajas","text":"Tenemos un script principal (00_Lider_) que tiene las condicionales y funciones generales guardadas en archivos .R y que se corren como sourcesTenemos un script principal (00_Lider_) que tiene las condicionales y funciones generales guardadas en archivos .R y que se corren como sourcesCada source corresponde una secciónCada source corresponde una secciónCada source tiene cientos de líneas que se pueden trabajar de forma independienteCada source tiene cientos de líneas que se pueden trabajar de forma independienteSe evita tener un único script con miles de líneas difícil de manejarSe evita tener un único script con miles de líneas difícil de manejar","code":""},{"path":"organización-de-documentos-y-carpetas-en-el-dico-duro-gap.html","id":"organización-de-documentos-y-carpetas-en-el-dico-duro-gap","chapter":"4 Organización de documentos y carpetas en el dico duro $(\\gap)","heading":"4 Organización de documentos y carpetas en el dico duro $(\\gap)","text":"En la carpeta BiodiversidadES en $(\\gap) (.e., L:\\BiodiversidadES) se incluye toda la información necesaria para correr los scripts de R albergados en el repositorio BiodiversidadES. También puede incluir documentación para entender los insumos (p.ej., archivos README)y versiones anteriores de los códigos de R. La carpeta BiodiversidadES contiene cuatro carpetas que corresponden los cuatro temas de la plataforma y su vez estas cuatro carpetas contienen carpetas con el nombre de las secciones.Cada sección tiene carpetas cuyo nombre se relaciona al formato o tipo de archivos que contiene: 01_Vectorial, 02_Raster, 03_Tabla, 04_Funciones, 05_Temporales, 06_Scripts.Ejemplo de arreglo final de carpetas en $(\\gap):NOTA. Puedes agregar más subcarpetas respetando el orden jerárquico, por ejemplo: 06_Imagenes","code":""},{"path":"loops-en-r.-funciones-base-de-r.html","id":"loops-en-r.-funciones-base-de-r","chapter":"5 Loops en R. Funciones base de R","heading":"5 Loops en R. Funciones base de R","text":"(‘“Looping”, “cycling”, “iterating” just replicating instructions’)Trabajaremos con conjunto de datos llamada iris, la base tiene información sobre el largo y ancho de sépalos y pétalos de 50 flores de tres especies de plantas.","code":"\ndata(iris)\nDT::datatable(iris)"},{"path":"loops-en-r.-funciones-base-de-r.html","id":"apply","chapter":"5 Loops en R. Funciones base de R","heading":"5.1 apply()","text":"Aplicas instrucciones filas o columnas de un data.frame o matriz.Si queremos estimar la media de cada una de mis cuatro variables de la tabla iris entonces podría usar lo siguiente:oooPero podríamos usar apply()¿Porqué sale error o NA?Para ir tomando ritmo resolvamos los siguientes ejercicios:1) Ahora quiero la raíz cuadrada de la media que previamente es elevada la 5ta potencia2) El resultado de la raíz cuadrada la quiero multiplicar por 15 y dividir entre 23) Si el resultado es mayor 1000 que devuelva un 0","code":"\nmean(iris$Sepal.Length)\n#> [1] 5.843333\n\nmean(iris$Sepal.Width)\n#> [1] 3.057333\n\nmean(iris$Petal.Length)\n#> [1] 3.758\n\nmean(iris$Petal.Width)\n#> [1] 1.199333\nc(mean(iris$Sepal.Length), mean(iris$Sepal.Width), mean(iris$Petal.Length), mean(iris$Petal.Width))\n#> [1] 5.843333 3.057333 3.758000 1.199333\ncolMeans(iris[,1:4])\n#> Sepal.Length  Sepal.Width Petal.Length  Petal.Width \n#>     5.843333     3.057333     3.758000     1.199333\napply(iris, 2, mean)\n#> Warning in mean.default(newX[, i], ...): argument is not\n#> numeric or logical: returning NA\n\n#> Warning in mean.default(newX[, i], ...): argument is not\n#> numeric or logical: returning NA\n\n#> Warning in mean.default(newX[, i], ...): argument is not\n#> numeric or logical: returning NA\n\n#> Warning in mean.default(newX[, i], ...): argument is not\n#> numeric or logical: returning NA\n\n#> Warning in mean.default(newX[, i], ...): argument is not\n#> numeric or logical: returning NA\n#> Sepal.Length  Sepal.Width Petal.Length  Petal.Width \n#>           NA           NA           NA           NA \n#>      Species \n#>           NA\napply(iris[,1:4], 2, function(x){\n  x.1 <- sqrt(mean(x)^5)\n})\n#> Sepal.Length  Sepal.Width Petal.Length  Petal.Width \n#>    82.537565    16.343948    27.377383     1.575251"},{"path":"loops-en-r.-funciones-base-de-r.html","id":"for","chapter":"5 Loops en R. Funciones base de R","heading":"5.2 for()","text":"Sirve para repetir n veces una o más instrucciones. La estructura es:En el siguiente ejemplo usaremos () para obtener un boxplot para cada variable de pétalo y sépalo.Solución 1.Solución 2.Además, podemos crear vectores, listas o data.frames, pero previamente debemos crear un objeto que va almacenar nuestra salida de cada iteración (repetición de instrucciones) y que debe tener las propiedades que queremos de salida.VectorData.frameListaPara colapsar la lista en un unico objeto podemos usar la función .call()","code":"\npar(mfrow=c(2,2))\nboxplot(iris$Sepal.Length ~ iris$Species, ylab = \"Sepal.Length\",\n        xlab = \"Specie\")\nboxplot(iris$Sepal.Width ~ iris$Species, ylab = \"Sepal.Width\",\n        xlab = \"Specie\")\nboxplot(iris$Petal.Length ~ iris$Species, ylab = \"Petal.Length\",\n        xlab = \"Specie\")\nboxplot(iris$Petal.Width ~ iris$Species, ylab = \"Petal.Width\",\n        xlab = \"Specie\")\npar(mfrow=c(2,2))\nfor(i in 1:4){\n  boxplot(iris[[i]] ~ iris$Species, ylab = names(iris)[i], xlab = \"Specie\")\n}\nprueba <- vector()\nfor(i in 1:4){\n  prueba[[i]] <- mean(iris[[i]])\n}\nprueba\n#> [1] 5.843333 3.057333 3.758000 1.199333\nprueba <- data.frame(Especie = \"\", \n                     \"MSepal.Length\" = 0,\n                     \"SDSepal.Length\" = 0)\nprueba\n#>   Especie MSepal.Length SDSepal.Length\n#> 1                     0              0\n# c(\"setosa\", \"versicolor\", \"virginica\") = unique(iris$Species)\nfor(i in 1:3){\n  i.1 <- iris[iris$Species == unique(iris$Species)[[i]],]\n  prueba[i,] <- data.frame(Especie = as.character(unique(iris$Species)[[i]]), \n                     \"MSepal.Length\" = mean(i.1$Sepal.Length),\n                     \"SDSepal.Length\" = sd(i.1$Sepal.Length))\n}\nprueba\n#>      Especie MSepal.Length SDSepal.Length\n#> 1     setosa         5.006      0.3524897\n#> 2 versicolor         5.936      0.5161711\n#> 3  virginica         6.588      0.6358796\nprueba <- list()\n# c(\"setosa\", \"versicolor\", \"virginica\") = unique(iris$Species)\nfor(i in 1:3){\n  i.1 <- iris[iris$Species == unique(iris$Species)[[i]],]\n  prueba[[i]] <- data.frame(Especie = as.character(unique(iris$Species)[[i]]), \n                     \"MSepal.Length\" = mean(i.1$Sepal.Length),\n                     \"SDSepal.Length\" = sd(i.1$Sepal.Length))\n}\nprueba\n#> [[1]]\n#>   Especie MSepal.Length SDSepal.Length\n#> 1  setosa         5.006      0.3524897\n#> \n#> [[2]]\n#>      Especie MSepal.Length SDSepal.Length\n#> 1 versicolor         5.936      0.5161711\n#> \n#> [[3]]\n#>     Especie MSepal.Length SDSepal.Length\n#> 1 virginica         6.588      0.6358796\nprueba <- do.call(rbind, prueba)\nprueba\n#>      Especie MSepal.Length SDSepal.Length\n#> 1     setosa         5.006      0.3524897\n#> 2 versicolor         5.936      0.5161711\n#> 3  virginica         6.588      0.6358796"},{"path":"loops-en-r.-funciones-base-de-r.html","id":"sapply","chapter":"5 Loops en R. Funciones base de R","heading":"5.3 sapply()","text":"sapply trabaja con vectores o listas y las salidas usuales pueden ser matrices, con varios array, una lista o un vector, es decir, puede hacer de todo!Veamos algunas de sus aplicaciones más comunes.1. Obtener un vector numérico. Estimar la media para cada variable del conjunto de datos iris.2. Obtener una matriz con arrays que puedes transformar data.frame. Ojo el resultado de iteración lo agrega en una “columna”.Si quiero tener una salida más amigable como un data.frame tendríamos que usar otras funciones, por ejemplo:3. Obtener una lista. Se necesita que las salidas tengan dimensiones distintas, de lo contrario lo juntara en una matriz.","code":"\nsapply(1:4, function(x){mean(iris[[x]])})\n#> [1] 5.843333 3.057333 3.758000 1.199333\nsapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  x.1 <- c(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))\n  return(x.1)\n})\n#>                [,1]                [,2]               \n#> Especie        \"setosa\"            \"versicolor\"       \n#> MSepal.Length  \"5.006\"             \"5.936\"            \n#> SDSepal.Length \"0.352489687213451\" \"0.516171147063863\"\n#>                [,3]               \n#> Especie        \"virginica\"        \n#> MSepal.Length  \"6.588\"            \n#> SDSepal.Length \"0.635879593274432\"\nlibrary(magrittr)# para usar %>%\nsapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  x.1 <- c(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))\n  return(x.1)\n}) %>% as.data.frame() %>% t() %>% as.data.frame()\n#>       Especie MSepal.Length    SDSepal.Length\n#> V1     setosa         5.006 0.352489687213451\n#> V2 versicolor         5.936 0.516171147063863\n#> V3  virginica         6.588 0.635879593274432\nsapply(3:9, seq)\n#> [[1]]\n#> [1] 1 2 3\n#> \n#> [[2]]\n#> [1] 1 2 3 4\n#> \n#> [[3]]\n#> [1] 1 2 3 4 5\n#> \n#> [[4]]\n#> [1] 1 2 3 4 5 6\n#> \n#> [[5]]\n#> [1] 1 2 3 4 5 6 7\n#> \n#> [[6]]\n#> [1] 1 2 3 4 5 6 7 8\n#> \n#> [[7]]\n#> [1] 1 2 3 4 5 6 7 8 9\nsapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  if(unique(x.1$Species) == \"setosa\"){\n  x.1 <- c(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length))  \n  } else {\n  x.1 <- c(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))  \n  }\n  \n  return(x.1)\n})\n#> [[1]]\n#>       Especie MSepal.Length \n#>      \"setosa\"       \"5.006\" \n#> \n#> [[2]]\n#>             Especie       MSepal.Length      SDSepal.Length \n#>        \"versicolor\"             \"5.936\" \"0.516171147063863\" \n#> \n#> [[3]]\n#>             Especie       MSepal.Length      SDSepal.Length \n#>         \"virginica\"             \"6.588\" \"0.635879593274432\""},{"path":"loops-en-r.-funciones-base-de-r.html","id":"lapply","chapter":"5 Loops en R. Funciones base de R","heading":"5.4 lapply()","text":"La función lapply es una de las funciones más usadas en R, permite realizar iteraciones sobre una lista, array o vector y devuelve siempre una lista. Esto tiene varias ventajas, por ejemplo, que puedes guardar cualquier tipo clase de R.VectorData.framelista","code":"\nlapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  \n  x.1 <- c(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))  \n  \n  return(x.1)\n})\n#> [[1]]\n#>             Especie       MSepal.Length      SDSepal.Length \n#>            \"setosa\"             \"5.006\" \"0.352489687213451\" \n#> \n#> [[2]]\n#>             Especie       MSepal.Length      SDSepal.Length \n#>        \"versicolor\"             \"5.936\" \"0.516171147063863\" \n#> \n#> [[3]]\n#>             Especie       MSepal.Length      SDSepal.Length \n#>         \"virginica\"             \"6.588\" \"0.635879593274432\"\nlapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  x.1 <- data.frame(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))  \n  \n  return(x.1)\n})\n#> [[1]]\n#>   Especie MSepal.Length SDSepal.Length\n#> 1  setosa         5.006      0.3524897\n#> \n#> [[2]]\n#>      Especie MSepal.Length SDSepal.Length\n#> 1 versicolor         5.936      0.5161711\n#> \n#> [[3]]\n#>     Especie MSepal.Length SDSepal.Length\n#> 1 virginica         6.588      0.6358796\nlapply(1:3, function(x){\n  x.1 <- iris[iris$Species == unique(iris$Species)[[x]],]\n  \n  x.1 <- list(\"Especie\" = as.character(unique(iris$Species)[[x]]), \n           \"MSepal.Length\" = mean(x.1$Sepal.Length),\n           \"SDSepal.Length\" = sd(x.1$Sepal.Length))  \n  \n  return(x.1)\n})\n#> [[1]]\n#> [[1]]$Especie\n#> [1] \"setosa\"\n#> \n#> [[1]]$MSepal.Length\n#> [1] 5.006\n#> \n#> [[1]]$SDSepal.Length\n#> [1] 0.3524897\n#> \n#> \n#> [[2]]\n#> [[2]]$Especie\n#> [1] \"versicolor\"\n#> \n#> [[2]]$MSepal.Length\n#> [1] 5.936\n#> \n#> [[2]]$SDSepal.Length\n#> [1] 0.5161711\n#> \n#> \n#> [[3]]\n#> [[3]]$Especie\n#> [1] \"virginica\"\n#> \n#> [[3]]$MSepal.Length\n#> [1] 6.588\n#> \n#> [[3]]$SDSepal.Length\n#> [1] 0.6358796"}]
